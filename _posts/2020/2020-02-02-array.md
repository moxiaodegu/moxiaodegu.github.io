---
title: Array
tags: 工具
layout: post
---

js数组是一组有序的数据，每个槽位可以存储任意类型的数据，动态大小，随数据增加动态增长。


## 创建数组的几种方法

### 构造函数

- 构造函数可以接收一个或多个值，如果只有一个值并类型为数值，会创建一个以数值为长度的数组，否则会创建一个以一个值或多个值的数组
- 也可省略 new 关键字

```javascript
let array1 = new Array()
console.log(array1) // []

let array2 = new Array(8)
console.log(array2) // 创建一个包含八个元素的数组，值都为undefined

let array3 = new Array("array")
console.log(array3) // ["array"]

let array4 = new Array("array", "object", "string")
console.log(array4) // ["array" ,"object", "string"]

```

### 数组字面量

- 字面量创建数组不会调用Array构造函数

```javascript
let array = [];
let array = ["array" ,"object", "string"];
```

### from()

- es6新增
- form() 将类数组结构转化成数组实例，第一个参数为类数组对象
    > 类数组对象 就是任何可以迭代的结构、或有length属性和可索引元素的结构
- 第二个参数是可选参数，新数组的每一个值 都会调用该函数
- 第三个选参数可以指定this<strong>对象</strong>，但在箭头函数中不适用

```javascript
let array = Array.from("array") // ["a","r","r","a","y"]

const set = new Set(['foo', 'bar', 'baz', 'foo']);
Array.from(set);
// [ "foo", "bar", "baz" ]

const map = new Map([[1, 2], [2, 4], [4, 8]]);
Array.from(map);
// [[1, 2], [2, 4], [4, 8]]

function f() {
  return Array.from(arguments);
}
f(1, 2, 3); // [ 1, 2, 3 ]

Array.from([1, 2, 3], x => x + x);
// [2, 4, 6]

Array.from({length: 5}, (v, i) => i);
// [0, 1, 2, 3, 4]

```

### of()

- es6新增
- of() 将一组参数转化成数组实例
- 代替es5的 Array.prototype.slice.call(args)
  
```javascript
let array = Array.of(1) // [1]
let array = Array.of(1,2) // [1,2]
let array = Array.of(undefined) // [undefined]

// 兼容旧环境
if (!Array.of) {
  Array.of = function() {
    return Array.prototype.slice.call(arguments);
  };
}
```

## 数组空位和索引

### 数组空位

- es6 新增方法普遍将空位当做值为undefined的元素，之前的会忽略
- map会跳过空位
- join会视为空字符串
  
```javascript
let arr = new Array(7)
let arr = [1,,,,,,7]
arr.map(() => 6) // [6,undefined,undefined,undefined,undefined,undefined,6]
arr.join("-")  // "1-----7"
```

### 数组索引

- 数组length 可以修改，可以通过设置length的长度末尾删除或添加数组

```javascript
let arr = [1,3,5,7]
arr.length = 5 
console.log(arr) // [1,3,5,7,undefined]
arr.length = 2 
console.log(arr) // [1,3]

```
